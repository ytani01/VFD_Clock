# VfdClock.ino

VFD管デジタル時計


## 使用方法

### 起動

* 起動(または、リセット)すると、バージョン番号を5秒間表示したのちに、時刻を表示します。

* バージョン表示中にどちらかのボタンを押すと、即座に時計表示になります。


### 日付表示

* 時刻表示の状態で、[MODE]ボタン(短押し) → 日時表示モード

* 日付表示のときは、ピリオドが消えます。

* 日付を5秒間表示すると、時刻表示に戻ります。

* 日付表示中に[MODE]ボタン(短押し)で、すぐに時刻表示に戻ります。
つまり、[MODE]ボタン(短押し)で、時刻と日付を交互に切り替えます。


### 日時設定方法

1. [MODE]ボタン 長押し → 日時設定モード (「年」が点滅)

2. 日時設定時に[MODE]ボタン(短押し) → 「年→月→日→時→分→秒」の切換

3. [SET]ボタン → 点滅部分がカウントアップ (「秒」の場合は、10秒単位、長押しで早送り可能)

4. 「秒」設定のとき、[MODE]ボタン(短押し) → 時刻表示

5. 「秒」設定のとき、[MODE]ボタン長押し → 「年」設定


### その他

* 日時表示中に、[SET]ボタンをダブルクリックすると、起動中と同じくバージョン番号を表示します。


## 変更点

### Ver. 05.01.00

* 日時変更中に[SET]ボタンを連打すると、ダブルクリックと認識され、
バージョン表示されてしまうバグを修正しました。


### Ver. 05.00.01

* ソースコードを全面的に見直して、オブジェクト指向にしました。
これにともなって、仕様もいくつか変更しています。
上記使用法をご参照下さい。

* ボタン長押し、ダブルクリック、トリプルクリック…を認識できるようになりました。

### Ver. 04.01.01

* 日付表示モードを追加しました。
[MODE]ボタン短押しで、日付を5秒間表示するようにしました。

* 桁が変化した直後にフラッシュ(1秒間点滅)するようにしました。
(秒の1の位以外)

* 「秒」の更新タイミング(1秒未満の誤差)を時刻設定タイミングに合うようにしました。
再起動した場合には、再度設定が必要。

* 時刻設定方法を変えました。秒の設定を可能にしました。
(「00秒」を待たずに時刻合わせをできます。)

### 以前の主な変更点

* 「時」の10の位が「0」のときは表示しないようにしました。
(市販の時計はほとんどこうなってると思います。)

* 時刻設定時に、変更する部分を点滅するようにしました。

* 起動直後5秒間、バージョン番号を点滅表示するようにしました。
(リセットすれば、バージョン番号を確認できます。)

* タイマー割り込みを使わずに、ほとんどloop()関数の中で処理するようにしました。
このため、FlexiTimer2は不要になりました。

* 時刻設定時は、[MODE]ボタンを**長押し**するようにしました。
時・分の切換は、短押しのままです。

* 秒の表示間隔がぶれるのを安定させました。
